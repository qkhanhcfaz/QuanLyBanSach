--
-- PostgreSQL database dump
--

\restrict sCALBeqtXshiCHOM0mFj4eViuczAft4p9lZOvVUAseM4yuXxamm9MRL8I862svk

-- Dumped from database version 18.1
-- Dumped by pg_dump version 18.1

-- Started on 2026-01-06 09:43:18

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 888 (class 1247 OID 16410)
-- Name: enum_orders_trang_thai_don_hang; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_orders_trang_thai_don_hang AS ENUM (
    'pending',
    'confirmed',
    'shipping',
    'delivered',
    'cancelled'
);


ALTER TYPE public.enum_orders_trang_thai_don_hang OWNER TO postgres;

--
-- TOC entry 885 (class 1247 OID 16404)
-- Name: enum_products_product_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_products_product_type AS ENUM (
    'printed',
    'ebook'
);


ALTER TYPE public.enum_products_product_type OWNER TO postgres;

--
-- TOC entry 879 (class 1247 OID 16390)
-- Name: enum_promotions_loai_giam_gia; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_promotions_loai_giam_gia AS ENUM (
    'percentage',
    'fixed_amount'
);


ALTER TYPE public.enum_promotions_loai_giam_gia OWNER TO postgres;

--
-- TOC entry 882 (class 1247 OID 16396)
-- Name: enum_promotions_pham_vi_ap_dung; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_promotions_pham_vi_ap_dung AS ENUM (
    'all',
    'category',
    'product'
);


ALTER TYPE public.enum_promotions_pham_vi_ap_dung OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 230 (class 1259 OID 16524)
-- Name: cart_items; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.cart_items (
    id bigint NOT NULL,
    cart_id bigint NOT NULL,
    product_id bigint NOT NULL,
    so_luong integer DEFAULT 1 NOT NULL
);


ALTER TABLE public.cart_items OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16523)
-- Name: cart_items_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.cart_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.cart_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 228 (class 1259 OID 16505)
-- Name: carts; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.carts (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.carts OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 16504)
-- Name: carts_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.carts ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.carts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 224 (class 1259 OID 16460)
-- Name: categories; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.categories (
    id bigint NOT NULL,
    ten_danh_muc character varying(255) NOT NULL,
    mo_ta text,
    danh_muc_cha_id bigint,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.categories OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16459)
-- Name: categories_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.categories ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.categories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 244 (class 1259 OID 16680)
-- Name: combo_items; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.combo_items (
    id bigint NOT NULL,
    combo_id bigint NOT NULL,
    product_id bigint NOT NULL,
    so_luong integer DEFAULT 1
);


ALTER TABLE public.combo_items OWNER TO postgres;

--
-- TOC entry 243 (class 1259 OID 16679)
-- Name: combo_items_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.combo_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.combo_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 242 (class 1259 OID 16664)
-- Name: combos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.combos (
    id bigint NOT NULL,
    ten_combo character varying(255) NOT NULL,
    mo_ta text,
    img character varying(255),
    gia_combo numeric(15,2) NOT NULL,
    trang_thai boolean DEFAULT true,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.combos OWNER TO postgres;

--
-- TOC entry 241 (class 1259 OID 16663)
-- Name: combos_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.combos ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.combos_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 246 (class 1259 OID 16699)
-- Name: ebook_download_links; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ebook_download_links (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    product_id bigint NOT NULL,
    order_id bigint NOT NULL,
    download_token character varying(255) NOT NULL,
    expires_at timestamp with time zone NOT NULL,
    is_used boolean DEFAULT false,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.ebook_download_links OWNER TO postgres;

--
-- TOC entry 245 (class 1259 OID 16698)
-- Name: ebook_download_links_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.ebook_download_links ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ebook_download_links_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 234 (class 1259 OID 16573)
-- Name: order_items; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.order_items (
    id bigint NOT NULL,
    order_id bigint NOT NULL,
    product_id bigint,
    so_luong_dat integer NOT NULL,
    don_gia numeric(12,2) NOT NULL
);


ALTER TABLE public.order_items OWNER TO postgres;

--
-- TOC entry 233 (class 1259 OID 16572)
-- Name: order_items_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.order_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.order_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 232 (class 1259 OID 16545)
-- Name: orders; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.orders (
    id bigint NOT NULL,
    user_id bigint,
    ten_nguoi_nhan character varying(255) NOT NULL,
    email_nguoi_nhan character varying(255) NOT NULL,
    sdt_nguoi_nhan character varying(20) NOT NULL,
    dia_chi_giao_hang character varying(255) NOT NULL,
    ghi_chu_khach_hang text,
    tong_tien_hang numeric(15,2) NOT NULL,
    phi_van_chuyen numeric(10,2) DEFAULT 0.00,
    tong_thanh_toan numeric(15,2) NOT NULL,
    phuong_thuc_thanh_toan character varying(50) NOT NULL,
    trang_thai_don_hang public.enum_orders_trang_thai_don_hang DEFAULT 'pending'::public.enum_orders_trang_thai_don_hang,
    trang_thai_thanh_toan boolean DEFAULT false,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.orders OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 16544)
-- Name: orders_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.orders ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.orders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 16479)
-- Name: products; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.products (
    id bigint NOT NULL,
    danh_muc_id bigint NOT NULL,
    ten_sach character varying(255) NOT NULL,
    tac_gia character varying(255),
    mo_ta_ngan text,
    gia_bia numeric(12,2) NOT NULL,
    so_luong_ton_kho integer DEFAULT 0 NOT NULL,
    nha_xuat_ban character varying(255),
    nam_xuat_ban integer,
    img character varying(255),
    trang_thai boolean DEFAULT true,
    product_type public.enum_products_product_type DEFAULT 'printed'::public.enum_products_product_type,
    ebook_url character varying(255),
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.products OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 16478)
-- Name: products_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.products ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.products_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 240 (class 1259 OID 16639)
-- Name: promotions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.promotions (
    id bigint NOT NULL,
    ma_khuyen_mai character varying(255) NOT NULL,
    mo_ta text NOT NULL,
    loai_giam_gia public.enum_promotions_loai_giam_gia NOT NULL,
    gia_tri_giam numeric(10,2) NOT NULL,
    dieu_kien_don_hang_toi_thieu numeric(15,2) DEFAULT 0,
    ngay_bat_dau timestamp with time zone NOT NULL,
    ngay_ket_thuc timestamp with time zone NOT NULL,
    so_luong_gioi_han integer,
    so_luong_da_su_dung integer DEFAULT 0,
    pham_vi_ap_dung public.enum_promotions_pham_vi_ap_dung DEFAULT 'all'::public.enum_promotions_pham_vi_ap_dung,
    danh_sach_ap_dung bigint[],
    trang_thai boolean DEFAULT true,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.promotions OWNER TO postgres;

--
-- TOC entry 239 (class 1259 OID 16638)
-- Name: promotions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.promotions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.promotions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 236 (class 1259 OID 16593)
-- Name: reviews; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.reviews (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    product_id bigint NOT NULL,
    rating integer,
    comment text,
    parent_id bigint,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.reviews OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 16592)
-- Name: reviews_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.reviews ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.reviews_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 16422)
-- Name: roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles (
    id bigint NOT NULL,
    ten_quyen character varying(255) NOT NULL
);


ALTER TABLE public.roles OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16421)
-- Name: roles_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.roles ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.roles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 238 (class 1259 OID 16623)
-- Name: slideshows; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.slideshows (
    id bigint NOT NULL,
    image_url character varying(255) NOT NULL,
    tieu_de character varying(255),
    phu_de character varying(255),
    link_to character varying(255),
    thu_tu_hien_thi integer DEFAULT 0,
    trang_thai boolean DEFAULT true,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.slideshows OWNER TO postgres;

--
-- TOC entry 237 (class 1259 OID 16622)
-- Name: slideshows_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.slideshows ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.slideshows_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 16432)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id bigint NOT NULL,
    role_id bigint DEFAULT 2 NOT NULL,
    ten_dang_nhap character varying(100) NOT NULL,
    email character varying(255) NOT NULL,
    mat_khau character varying(255) NOT NULL,
    ho_ten character varying(255),
    phone character varying(20),
    dia_chi character varying(255),
    trang_thai boolean DEFAULT true,
    "createdAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "updatedAt" timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16431)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 5187 (class 0 OID 16524)
-- Dependencies: 230
-- Data for Name: cart_items; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.cart_items (id, cart_id, product_id, so_luong) FROM stdin;
1	1	1	2
2	1	4	1
5	2	1	1
6	2	3	5
7	1	2	3
8	3	2	1
9	3	4	1
10	4	1	2
\.


--
-- TOC entry 5185 (class 0 OID 16505)
-- Dependencies: 228
-- Data for Name: carts; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.carts (id, user_id, "createdAt", "updatedAt") FROM stdin;
1	3	2026-01-03 13:05:55.650624+07	2026-01-03 13:05:55.650624+07
2	4	2026-01-03 13:22:40.279546+07	2026-01-03 13:22:40.279546+07
3	2	2026-01-04 14:55:24.418994+07	2026-01-04 14:55:24.418994+07
4	5	2026-01-04 14:55:24.418994+07	2026-01-04 14:55:24.418994+07
\.


--
-- TOC entry 5181 (class 0 OID 16460)
-- Dependencies: 224
-- Data for Name: categories; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.categories (id, ten_danh_muc, mo_ta, danh_muc_cha_id, "createdAt", "updatedAt") FROM stdin;
1	Sách Kinh Tế	\N	\N	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
2	Văn Học	\N	\N	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
3	Phát triển bản thân	\N	1	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
4	Văn học Việt Nam	\N	2	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
\.


--
-- TOC entry 5201 (class 0 OID 16680)
-- Dependencies: 244
-- Data for Name: combo_items; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.combo_items (id, combo_id, product_id, so_luong) FROM stdin;
1	1	2	1
2	1	3	1
3	2	1	1
4	2	2	1
5	3	4	1
6	3	1	1
7	4	3	1
8	4	2	1
9	2	1	1
10	2	2	1
11	3	4	1
12	3	1	1
13	4	3	1
14	4	2	1
\.


--
-- TOC entry 5199 (class 0 OID 16664)
-- Dependencies: 242
-- Data for Name: combos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.combos (id, ten_combo, mo_ta, img, gia_combo, trang_thai, "createdAt", "updatedAt") FROM stdin;
1	Combo Tinh Hoa Văn Học	Tuyển tập các tác phẩm văn học kinh điển Việt Nam và Thế giới	combo5sach-vhvn.png	150000.00	t	2026-01-03 13:05:55.650624+07	2026-01-03 13:05:55.650624+07
2	Combo Phát Triển Bản Thân	Bộ đôi thay đổi tư duy: Đắc Nhân Tâm + Nhà Giả Kim	dac-nhan-tam.png	160000.00	t	2026-01-03 13:07:47.818305+07	2026-01-03 13:07:47.818305+07
3	Combo Tâm Lý Học Ứng Dụng	Hiểu mình hiểu người: Tư Duy Nhanh Chậm + Đắc Nhân Tâm	tu-duy-nhanh-cham.png	250000.00	t	2026-01-03 13:07:47.818305+07	2026-01-03 13:07:47.818305+07
4	Combo Văn Học Chọn Lọc	Những tác phẩm để đời: Chí Phèo + Nhà Giả Kim	nha-gia-kim.png	130000.00	t	2026-01-03 13:07:47.818305+07	2026-01-03 13:07:47.818305+07
5	Combo Phát Triển Bản Thân	Bộ đôi thay đổi tư duy: Đắc Nhân Tâm + Nhà Giả Kim	dac-nhan-tam.png	160000.00	t	2026-01-03 13:10:25.385374+07	2026-01-03 13:10:25.385374+07
6	Combo Tâm Lý Học Ứng Dụng	Hiểu mình hiểu người: Tư Duy Nhanh Chậm + Đắc Nhân Tâm	tu-duy-nhanh-cham.png	250000.00	t	2026-01-03 13:10:25.385374+07	2026-01-03 13:10:25.385374+07
7	Combo Văn Học Chọn Lọc	Những tác phẩm để đời: Chí Phèo + Nhà Giả Kim	nha-gia-kim.png	130000.00	t	2026-01-03 13:10:25.385374+07	2026-01-03 13:10:25.385374+07
\.


--
-- TOC entry 5203 (class 0 OID 16699)
-- Dependencies: 246
-- Data for Name: ebook_download_links; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ebook_download_links (id, user_id, product_id, order_id, download_token, expires_at, is_used, "createdAt", "updatedAt") FROM stdin;
1	4	4	3	secure-token-xyz-123-abc-789	2026-02-01 00:00:00+07	f	2026-01-03 13:05:55.650624+07	2026-01-03 13:05:55.650624+07
2	1	1	1	token-admin-vip-001	2026-02-02 13:29:49.076546+07	f	2026-01-03 13:29:49.076546+07	2026-01-03 13:29:49.076546+07
3	2	2	2	token-thanh-le-2026	2026-01-10 13:29:49.076546+07	t	2026-01-03 13:29:49.076546+07	2026-01-03 13:29:49.076546+07
4	1	3	4	token-admin-mua-lan-2	2026-02-02 13:29:49.076546+07	f	2026-01-03 13:29:49.076546+07	2026-01-03 13:29:49.076546+07
\.


--
-- TOC entry 5191 (class 0 OID 16573)
-- Dependencies: 234
-- Data for Name: order_items; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.order_items (id, order_id, product_id, so_luong_dat, don_gia) FROM stdin;
1	1	1	1	99000.00
2	1	2	1	79000.00
3	2	3	1	65000.00
4	3	4	1	189000.00
5	4	1	1	99000.00
6	4	2	1	79000.00
\.


--
-- TOC entry 5189 (class 0 OID 16545)
-- Dependencies: 232
-- Data for Name: orders; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.orders (id, user_id, ten_nguoi_nhan, email_nguoi_nhan, sdt_nguoi_nhan, dia_chi_giao_hang, ghi_chu_khach_hang, tong_tien_hang, phi_van_chuyen, tong_thanh_toan, phuong_thuc_thanh_toan, trang_thai_don_hang, trang_thai_thanh_toan, "createdAt", "updatedAt") FROM stdin;
1	2	Lê Thị Thanh	thanh.le@email.com	0912345678	202 Võ Thị Sáu, Phường 7, Quận 3, TP.HCM	\N	178000.00	20000.00	198000.00	COD	delivered	t	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
2	3	Nguyễn Văn An	an.nguyen@email.com	0988123456	65 Nguyễn Tất Thành, P.13, Quận 4, TP.HCM	\N	65000.00	20000.00	85000.00	COD	pending	f	2026-01-03 10:22:30.846725+07	2026-01-03 10:22:30.846725+07
3	4	Trần Thị Bích Hằng	hang.tran@email.com	0903888999	15 Đường số 10, Tân Quy, Quận 7, TP.HCM	\N	189000.00	0.00	189000.00	Momo	shipping	t	2026-01-03 10:22:30.846725+07	2026-01-03 10:22:30.846725+07
4	2	Lê Thị Thanh	thanh.le@email.com	0912345678	202 Võ Thị Sáu, Phường 7, Quận 3, TP.HCM	\N	178000.00	0.00	178000.00	Banking	cancelled	f	2026-01-03 10:22:30.846725+07	2026-01-03 10:22:30.846725+07
\.


--
-- TOC entry 5183 (class 0 OID 16479)
-- Dependencies: 226
-- Data for Name: products; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.products (id, danh_muc_id, ten_sach, tac_gia, mo_ta_ngan, gia_bia, so_luong_ton_kho, nha_xuat_ban, nam_xuat_ban, img, trang_thai, product_type, ebook_url, "createdAt", "updatedAt") FROM stdin;
1	3	Đắc Nhân Tâm	Dale Carnegie	Nghệ thuật thu phục lòng người - First News.	99000.00	100	NXB Tổng hợp TP.HCM	2022	dac-nhan-tam.png	t	printed	\N	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
2	3	Nhà Giả Kim	Paulo Coelho	Tiểu thuyết bán chạy của Paulo Coelho.	79000.00	80	NXB Hội Nhà Văn	2021	nha-gia-kim.png	t	printed	\N	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
3	4	Chí Phèo	Nam Cao	Tác phẩm văn học hiện thực xuất sắc của Nam Cao.	65000.00	50	NXB Văn Học	2020	chi-pheo.png	t	printed	\N	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
4	1	Tư Duy Nhanh và Chậm	Daniel Kahneman	Sách tâm lý học hành vi kinh điển.	189000.00	40	NXB Trẻ	2023	tu-duy-nhanh-cham.png	t	ebook	tu-duy-nhanh-va-cham.pdf	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
\.


--
-- TOC entry 5197 (class 0 OID 16639)
-- Dependencies: 240
-- Data for Name: promotions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.promotions (id, ma_khuyen_mai, mo_ta, loai_giam_gia, gia_tri_giam, dieu_kien_don_hang_toi_thieu, ngay_bat_dau, ngay_ket_thuc, so_luong_gioi_han, so_luong_da_su_dung, pham_vi_ap_dung, danh_sach_ap_dung, trang_thai, "createdAt", "updatedAt") FROM stdin;
1	DOANHAY	Giảm 10% cho toàn bộ đơn hàng	percentage	10.00	0.00	2023-01-01 00:00:00+07	2026-12-31 00:00:00+07	\N	0	all	\N	t	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
2	FREESHIP	Miễn phí vận chuyển tối đa 20k cho đơn từ 150k	fixed_amount	20000.00	150000.00	2026-01-01 00:00:00+07	2026-12-31 00:00:00+07	100	0	all	\N	t	2026-01-03 10:38:36.20268+07	2026-01-03 10:38:36.20268+07
3	TET2026	Lì xì Tết Ất Tỵ giảm 15% toàn bộ sách	percentage	15.00	0.00	2026-01-01 00:00:00+07	2026-02-28 00:00:00+07	50	0	all	\N	t	2026-01-03 10:38:36.20268+07	2026-01-03 10:38:36.20268+07
4	SINHVIEN	Ưu đãi 5% hỗ trợ học tập (K22 - K25)	percentage	5.00	0.00	2026-09-05 00:00:00+07	2026-06-30 00:00:00+07	1000	0	all	\N	t	2026-01-03 10:38:36.20268+07	2026-01-03 10:38:36.20268+07
\.


--
-- TOC entry 5193 (class 0 OID 16593)
-- Dependencies: 236
-- Data for Name: reviews; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.reviews (id, user_id, product_id, rating, comment, parent_id, "createdAt", "updatedAt") FROM stdin;
1	2	1	5	Sách rất hay và ý nghĩa, một cuốn sách gối đầu giường!	\N	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
2	3	3	4	Sách in đẹp, giấy xốp nhẹ. Nội dung về Chí Phèo thì quá kinh điển rồi.	\N	2026-01-03 10:34:26.860752+07	2026-01-03 10:34:26.860752+07
3	4	4	5	Ebook định dạng PDF rất nét, đọc trên iPad cực thích. Kiến thức tâm lý học rất hay.	\N	2026-01-03 10:34:26.860752+07	2026-01-03 10:34:26.860752+07
4	3	2	5	Cuốn sách gối đầu giường của mình. Đọc đi đọc lại vẫn thấy thấm thía.	\N	2026-01-03 10:34:26.860752+07	2026-01-03 10:34:26.860752+07
\.


--
-- TOC entry 5177 (class 0 OID 16422)
-- Dependencies: 220
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.roles (id, ten_quyen) FROM stdin;
1	admin
2	user
\.


--
-- TOC entry 5195 (class 0 OID 16623)
-- Dependencies: 238
-- Data for Name: slideshows; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.slideshows (id, image_url, tieu_de, phu_de, link_to, thu_tu_hien_thi, trang_thai, "createdAt", "updatedAt") FROM stdin;
1	slider_item_1_image.png	Tuần lễ Sách Văn Học	Giảm giá lên đến 50%	/categories/2	0	t	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
2	slider_item_2_image.png	Top Sách Bán Chạy Nhất	Đừng bỏ lỡ những siêu phẩm	/products/1	0	t	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
3	slider_item_3_image.png	Mừng Xuân Ất Tỵ 2026	Lì xì đầu năm - Freeship mọi đơn	/promotions	3	t	2026-01-03 10:46:16.479195+07	2026-01-03 10:46:16.479195+07
4	slider_item_5_image.png	Combo Sách Kinh Tế	Mua 3 tặng 1 - Tích lũy kiến thức	/combos	4	t	2026-01-03 10:46:16.479195+07	2026-01-03 10:46:16.479195+07
\.


--
-- TOC entry 5179 (class 0 OID 16432)
-- Dependencies: 222
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, role_id, ten_dang_nhap, email, mat_khau, ho_ten, phone, dia_chi, trang_thai, "createdAt", "updatedAt") FROM stdin;
1	1	admin	admin@bookstore.com	$2a$10$fI0A3.R63P.xGq8C3d3l3.yH6xQv3F5sWJvP/YgY7nUa5.yH7p.eS	Quản Trị Viên	02838221111	Đường Sách Nguyễn Văn Bình, Bến Nghé, Quận 1, TP.HCM	t	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
2	2	htnhat	huathanhnhat@gmail.com	$2a$10$fI0A3.R63P.xGq8C3d3l3.yH6xQv3F5sWJvP/YgY7nUa5.yH7p.eS	Hứa Thành Nhất	0912345678	202 Võ Thị Sáu, Phường 7, Quận 3, TP.HCM	t	2026-01-03 08:16:38.789915+07	2026-01-03 08:16:38.789915+07
3	2	luunguyen	luunguyen6752@gmail.com	$2a$10$fI0A3.R63P.xGq8C3d3l3.yH6xQv3F5sWJvP/YgY7nUa5.yH7p.eS	Lưu Nguyên	0988123456	65 Nguyễn Tất Thành, P.13, Quận 4, TP.HCM	t	2026-01-03 09:13:12.377694+07	2026-01-03 09:13:12.377694+07
4	2	laduy	luonganhduy1002@gmail.com	$2a$10$fI0A3.R63P.xGq8C3d3l3.yH6xQv3F5sWJvP/YgY7nUa5.yH7p.eS	Lương Anh Duy	0903888999	15 Đường số 10, Tân Quy, Quận 7, TP.HCM	t	2026-01-03 09:13:12.377694+07	2026-01-03 09:13:12.377694+07
5	1	tvqkhanh	tranvanquockhanh123@gmail.com	$2a$10$fl0A3.R63P.xGq8C3d3l3.yH6xQv3F5sWJvP/YgY7nUa5.yH7p	Trần Văn Quốc Khánh	0909998887	\N	t	2026-01-03 14:02:43.084545+07	2026-01-03 14:02:43.084545+07
6	2	lethithanh	thanh.le.biz@gmail.com	$2a$10$demoHashPass...	Lê Thị Thanh	0901234567	202 Võ Thị Sáu, Q3, TP.HCM	t	2026-01-04 14:53:41.378513+07	2026-01-04 14:53:41.378513+07
7	2	nguyenvanan	an.nguyen.vpp@gmail.com	$2a$10$demoHashPass...	Nguyễn Văn An	0988777666	65 Nguyễn Tất Thành, Q4, TP.HCM	t	2026-01-04 14:53:41.378513+07	2026-01-04 14:53:41.378513+07
8	1	bichhang	mod.support@bookstore.com	$2a$10$demoHashPass...	Trần Bích Hằng	0909000111	Toà nhà Bitexco, Q1, TP.HCM	t	2026-01-04 14:53:41.378513+07	2026-01-04 14:53:41.378513+07
\.


--
-- TOC entry 5209 (class 0 OID 0)
-- Dependencies: 229
-- Name: cart_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.cart_items_id_seq', 10, true);


--
-- TOC entry 5210 (class 0 OID 0)
-- Dependencies: 227
-- Name: carts_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.carts_id_seq', 4, true);


--
-- TOC entry 5211 (class 0 OID 0)
-- Dependencies: 223
-- Name: categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.categories_id_seq', 4, true);


--
-- TOC entry 5212 (class 0 OID 0)
-- Dependencies: 243
-- Name: combo_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.combo_items_id_seq', 14, true);


--
-- TOC entry 5213 (class 0 OID 0)
-- Dependencies: 241
-- Name: combos_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.combos_id_seq', 7, true);


--
-- TOC entry 5214 (class 0 OID 0)
-- Dependencies: 245
-- Name: ebook_download_links_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ebook_download_links_id_seq', 4, true);


--
-- TOC entry 5215 (class 0 OID 0)
-- Dependencies: 233
-- Name: order_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.order_items_id_seq', 6, true);


--
-- TOC entry 5216 (class 0 OID 0)
-- Dependencies: 231
-- Name: orders_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.orders_id_seq', 4, true);


--
-- TOC entry 5217 (class 0 OID 0)
-- Dependencies: 225
-- Name: products_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.products_id_seq', 4, true);


--
-- TOC entry 5218 (class 0 OID 0)
-- Dependencies: 239
-- Name: promotions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.promotions_id_seq', 4, true);


--
-- TOC entry 5219 (class 0 OID 0)
-- Dependencies: 235
-- Name: reviews_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.reviews_id_seq', 4, true);


--
-- TOC entry 5220 (class 0 OID 0)
-- Dependencies: 219
-- Name: roles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.roles_id_seq', 2, true);


--
-- TOC entry 5221 (class 0 OID 0)
-- Dependencies: 237
-- Name: slideshows_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.slideshows_id_seq', 4, true);


--
-- TOC entry 5222 (class 0 OID 0)
-- Dependencies: 221
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 8, true);


--
-- TOC entry 4991 (class 2606 OID 16533)
-- Name: cart_items cart_items_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cart_items
    ADD CONSTRAINT cart_items_pkey PRIMARY KEY (id);


--
-- TOC entry 4987 (class 2606 OID 16515)
-- Name: carts carts_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.carts
    ADD CONSTRAINT carts_pkey PRIMARY KEY (id);


--
-- TOC entry 4989 (class 2606 OID 16517)
-- Name: carts carts_user_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.carts
    ADD CONSTRAINT carts_user_id_key UNIQUE (user_id);


--
-- TOC entry 4982 (class 2606 OID 16472)
-- Name: categories categories_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_pkey PRIMARY KEY (id);


--
-- TOC entry 5007 (class 2606 OID 16687)
-- Name: combo_items combo_items_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.combo_items
    ADD CONSTRAINT combo_items_pkey PRIMARY KEY (id);


--
-- TOC entry 5005 (class 2606 OID 16678)
-- Name: combos combos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.combos
    ADD CONSTRAINT combos_pkey PRIMARY KEY (id);


--
-- TOC entry 5009 (class 2606 OID 16716)
-- Name: ebook_download_links ebook_download_links_download_token_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ebook_download_links
    ADD CONSTRAINT ebook_download_links_download_token_key UNIQUE (download_token);


--
-- TOC entry 5011 (class 2606 OID 16714)
-- Name: ebook_download_links ebook_download_links_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ebook_download_links
    ADD CONSTRAINT ebook_download_links_pkey PRIMARY KEY (id);


--
-- TOC entry 4995 (class 2606 OID 16581)
-- Name: order_items order_items_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.order_items
    ADD CONSTRAINT order_items_pkey PRIMARY KEY (id);


--
-- TOC entry 4993 (class 2606 OID 16566)
-- Name: orders orders_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orders
    ADD CONSTRAINT orders_pkey PRIMARY KEY (id);


--
-- TOC entry 4985 (class 2606 OID 16497)
-- Name: products products_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT products_pkey PRIMARY KEY (id);


--
-- TOC entry 5001 (class 2606 OID 16662)
-- Name: promotions promotions_ma_khuyen_mai_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.promotions
    ADD CONSTRAINT promotions_ma_khuyen_mai_key UNIQUE (ma_khuyen_mai);


--
-- TOC entry 5003 (class 2606 OID 16660)
-- Name: promotions promotions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.promotions
    ADD CONSTRAINT promotions_pkey PRIMARY KEY (id);


--
-- TOC entry 4997 (class 2606 OID 16606)
-- Name: reviews reviews_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reviews
    ADD CONSTRAINT reviews_pkey PRIMARY KEY (id);


--
-- TOC entry 4972 (class 2606 OID 16428)
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- TOC entry 4974 (class 2606 OID 16430)
-- Name: roles roles_ten_quyen_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_ten_quyen_key UNIQUE (ten_quyen);


--
-- TOC entry 4999 (class 2606 OID 16637)
-- Name: slideshows slideshows_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.slideshows
    ADD CONSTRAINT slideshows_pkey PRIMARY KEY (id);


--
-- TOC entry 4976 (class 2606 OID 16453)
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- TOC entry 4978 (class 2606 OID 16449)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 4980 (class 2606 OID 16451)
-- Name: users users_ten_dang_nhap_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_ten_dang_nhap_key UNIQUE (ten_dang_nhap);


--
-- TOC entry 4983 (class 1259 OID 16503)
-- Name: idx_product_ten_sach; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_product_ten_sach ON public.products USING btree (ten_sach);


--
-- TOC entry 5016 (class 2606 OID 16534)
-- Name: cart_items cart_items_cart_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cart_items
    ADD CONSTRAINT cart_items_cart_id_fkey FOREIGN KEY (cart_id) REFERENCES public.carts(id) ON DELETE CASCADE;


--
-- TOC entry 5017 (class 2606 OID 16539)
-- Name: cart_items cart_items_product_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cart_items
    ADD CONSTRAINT cart_items_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.products(id) ON DELETE CASCADE;


--
-- TOC entry 5015 (class 2606 OID 16518)
-- Name: carts carts_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.carts
    ADD CONSTRAINT carts_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- TOC entry 5013 (class 2606 OID 16473)
-- Name: categories categories_danh_muc_cha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_danh_muc_cha_id_fkey FOREIGN KEY (danh_muc_cha_id) REFERENCES public.categories(id) ON DELETE SET NULL;


--
-- TOC entry 5024 (class 2606 OID 16688)
-- Name: combo_items combo_items_combo_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.combo_items
    ADD CONSTRAINT combo_items_combo_id_fkey FOREIGN KEY (combo_id) REFERENCES public.combos(id) ON DELETE CASCADE;


--
-- TOC entry 5025 (class 2606 OID 16693)
-- Name: combo_items combo_items_product_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.combo_items
    ADD CONSTRAINT combo_items_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.products(id) ON DELETE CASCADE;


--
-- TOC entry 5026 (class 2606 OID 16727)
-- Name: ebook_download_links ebook_download_links_order_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ebook_download_links
    ADD CONSTRAINT ebook_download_links_order_id_fkey FOREIGN KEY (order_id) REFERENCES public.orders(id) ON DELETE CASCADE;


--
-- TOC entry 5027 (class 2606 OID 16722)
-- Name: ebook_download_links ebook_download_links_product_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ebook_download_links
    ADD CONSTRAINT ebook_download_links_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.products(id) ON DELETE CASCADE;


--
-- TOC entry 5028 (class 2606 OID 16717)
-- Name: ebook_download_links ebook_download_links_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ebook_download_links
    ADD CONSTRAINT ebook_download_links_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- TOC entry 5019 (class 2606 OID 16582)
-- Name: order_items order_items_order_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.order_items
    ADD CONSTRAINT order_items_order_id_fkey FOREIGN KEY (order_id) REFERENCES public.orders(id) ON DELETE CASCADE;


--
-- TOC entry 5020 (class 2606 OID 16587)
-- Name: order_items order_items_product_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.order_items
    ADD CONSTRAINT order_items_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.products(id) ON DELETE SET NULL;


--
-- TOC entry 5018 (class 2606 OID 16567)
-- Name: orders orders_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orders
    ADD CONSTRAINT orders_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE SET NULL;


--
-- TOC entry 5014 (class 2606 OID 16498)
-- Name: products products_danh_muc_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.products
    ADD CONSTRAINT products_danh_muc_id_fkey FOREIGN KEY (danh_muc_id) REFERENCES public.categories(id) ON DELETE SET NULL;


--
-- TOC entry 5021 (class 2606 OID 16617)
-- Name: reviews reviews_parent_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reviews
    ADD CONSTRAINT reviews_parent_id_fkey FOREIGN KEY (parent_id) REFERENCES public.reviews(id) ON DELETE CASCADE;


--
-- TOC entry 5022 (class 2606 OID 16612)
-- Name: reviews reviews_product_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reviews
    ADD CONSTRAINT reviews_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.products(id) ON DELETE CASCADE;


--
-- TOC entry 5023 (class 2606 OID 16607)
-- Name: reviews reviews_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reviews
    ADD CONSTRAINT reviews_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- TOC entry 5012 (class 2606 OID 16454)
-- Name: users users_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(id) ON DELETE SET NULL;


-- Completed on 2026-01-06 09:43:18

--
-- PostgreSQL database dump complete
--

\unrestrict sCALBeqtXshiCHOM0mFj4eViuczAft4p9lZOvVUAseM4yuXxamm9MRL8I862svk

